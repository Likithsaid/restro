<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order Status</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="container mt-5">

<h2 class="text-center mb-4">Order Status</h2>

<div id="orderContainer"></div>

<script>
const order = JSON.parse(localStorage.getItem("latestOrder"));

if (!order) {
    document.getElementById("orderContainer").innerHTML = `
        <div class="alert alert-danger text-center">
            <h4>No order found</h4>
            <a href="menu.html" class="btn btn-primary mt-3">Go to Menu</a>
        </div>
    `;
} else {
    let itemsHTML = "";
    let total = 0;

    order.items.forEach(item => {
        const qty = item.quantity || 1;
        const price = item.price || 0;
        total += qty * price;

        itemsHTML += `
            <li class="list-group-item d-flex justify-content-between">
                <span>${item.name} × ${qty}</span>
                <strong>₹${(qty * price).toFixed(2)}</strong>
            </li>
        `;
    });

    document.getElementById("orderContainer").innerHTML = `
        <div class="card mb-4">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0">⏳ Order Submitted</h4>
            </div>
            <div class="card-body">
                <p><strong>Order ID:</strong> ${order.orderId}</p>
                <p><strong>Customer:</strong> ${order.customer.firstName} ${order.customer.lastName}</p>
                <p><strong>Order Time:</strong> ${order.orderTime}</p>
                <p><strong>Status:</strong> Pending (Waiting for confirmation)</p>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-warning text-dark">
                <h5>Your Items</h5>
            </div>
            <ul class="list-group list-group-flush">
                ${itemsHTML}
            </ul>
            <div class="card-footer d-flex justify-content-between">
                <strong>Total</strong>
                <strong class="text-success">₹${total.toFixed(2)}</strong>
            </div>
        </div>

        <div class="text-center">
            <a href="index.html" class="btn btn-primary">Back to Home</a>
        </div>
    `;
}

const orders = JSON.parse(localStorage.getItem("orders") || "[]");
const orderId = localStorage.getItem("latestOrderId");

const order = orders.find(o => o.orderId === orderId);

if (!order) {
    document.body.innerHTML = "<h3>No order found</h3>";
} else {
    document.body.innerHTML = `
        <h3>Order Status</h3>
        <p><strong>Order ID:</strong> ${order.orderId}</p>
        <p><strong>Status:</strong> ${order.status.toUpperCase()}</p>
        ${
            order.status === "confirmed"
            ? `<p><strong>Waiting Time:</strong> ${order.waitingTime}</p>`
            : ""
        }
        <p><strong>Order Time:</strong> ${order.orderTime}</p>
    `;
}
</script>

  




</body>
</html>

